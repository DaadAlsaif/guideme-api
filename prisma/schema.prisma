generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  user_id      String        @id @default(auto()) @map("_id") @db.ObjectId
  name         String
  email        String
  phone        String
  country      String
  reservations Reservation[]
  my_reviews   Review[]

  @@map("users")
}

//------------------------------
model Tourguide {
  tourguide_id  String        @id @default(auto()) @map("_id") @db.ObjectId
  name          String
  email         String
  phone         String
  languages     Languages?
  experience    String?
  city          String?
  price         String?
  reservations  Reservation[]
  given_reviews Review[]


  @@map("tourguides")
}

enum Languages {
  arabic
  english
  french
  spanish
  turkish

}

//---------------------------------
model Reservation {
  booking_id     String      @id @default(auto()) @map("_id") @db.ObjectId
  booking_status Status
  payment        BookPayment
  created_at     DateTime    @default(now())
  user_id        String?     @db.ObjectId
  User           User?       @relation(fields: [user_id], references: [user_id])
  tourguide      Tourguide   @relation(fields: [tourguide_id], references: [tourguide_id])
  tourguide_id   String      @db.ObjectId

  @@map("reservations")
}

enum Status {
  pending
  accepted
  rejected
}

enum BookPayment {
  cash
  card
  voucher
}

model Review {
  review_id    String     @id @default(auto()) @map("_id") @db.ObjectId
  rate         Rate
  User         User?      @relation(fields: [user_id], references: [user_id])
  user_id      String?    @db.ObjectId
  Tourguide    Tourguide? @relation(fields: [tourguide_id], references: [tourguide_id])
  tourguide_id String?    @db.ObjectId
}

enum Rate {
  Poor
  Good
  veryGood
  Excellent
}
